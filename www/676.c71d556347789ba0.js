"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[676],{676:(E,u,l)=>{l.r(u),l.d(u,{Tab2Page:()=>y});var _=l(467),i=l(7844),g=l(177),d=l(4341),h=l(5079),m=l(5873),n=l(4438),p=l(6453),f=l(8986),P=l(4796);function k(a,r){if(1&a){const e=n.RV6();n.j41(0,"ion-item",1),n.bIt("click",function(){const t=n.eBV(e).$implicit,s=n.XpG(2);return n.Njj(s.onSuggestionClick(t.name))}),n.EFF(1),n.k0s()}if(2&a){const e=r.$implicit;n.R7$(),n.SpI(" ",e.name," ")}}function C(a,r){if(1&a&&(n.j41(0,"div",6)(1,"ion-list"),n.Z7z(2,k,2,1,"ion-item",null,n.fX1),n.k0s()()),2&a){const e=n.XpG();n.R7$(2),n.Dyx(e.suggestions)}}function b(a,r){if(1&a&&(n.j41(0,"div")(1,"ion-chip",15),n.EFF(2),n.k0s()()),2&a){const e=r.$implicit;n.R7$(2),n.JRh(e)}}function M(a,r){if(1&a){const e=n.RV6();n.j41(0,"ion-col",9)(1,"ion-card",12),n.bIt("click",function(){const t=n.eBV(e).$implicit,s=n.XpG(2);return n.Njj(s.onClick(null==t?null:t.id))}),n.j41(2,"ion-card-header")(3,"ion-card-title"),n.EFF(4),n.k0s()(),n.j41(5,"ion-card-content"),n.nrm(6,"img",13),n.j41(7,"div",14)(8,"strong"),n.EFF(9,"Types:"),n.k0s(),n.Z7z(10,b,3,1,"div",null,n.fX1),n.k0s()()()()}if(2&a){const e=r.$implicit;n.R7$(4),n.JRh(e.name),n.R7$(2),n.Mz_("alt","",e.name," image"),n.Y8G("src",e.image,n.B4B),n.R7$(4),n.Dyx(e.types)}}function O(a,r){if(1&a){const e=n.RV6();n.j41(0,"div")(1,"ion-title"),n.EFF(2,"Pokemon del Dia"),n.k0s()(),n.j41(3,"div",7)(4,"ion-card",1),n.bIt("click",function(){n.eBV(e);const t=n.XpG();return n.Njj(t.onClick(null==t.data?null:t.data.id))}),n.nrm(5,"img",8),n.j41(6,"ion-card-header")(7,"ion-card-title"),n.EFF(8),n.k0s()(),n.j41(9,"ion-card-content")(10,"ion-card-subtitle"),n.EFF(11),n.k0s()()()(),n.j41(12,"div")(13,"ion-grid",7)(14,"ion-row"),n.Z7z(15,M,12,4,"ion-col",9,n.fX1),n.k0s()()(),n.j41(17,"ion-infinite-scroll",10),n.bIt("ionInfinite",function(t){n.eBV(e);const s=n.XpG();return n.Njj(s.loadData(t))}),n.nrm(18,"ion-infinite-scroll-content",11),n.k0s()}if(2&a){const e=n.XpG();n.R7$(5),n.Y8G("src",null==e.data||null==e.data.sprites||null==e.data.sprites.other||null==e.data.sprites.other["official-artwork"]?null:e.data.sprites.other["official-artwork"].front_default,n.B4B),n.R7$(3),n.JRh(null==e.data?null:e.data.name),n.R7$(3),n.SpI(" ",null==e.data||null==e.data.types[0].type?null:e.data.types[0].type.name," "),n.R7$(4),n.Dyx(e.pokemons)}}function T(a,r){if(1&a){const e=n.RV6();n.j41(0,"div",7)(1,"ion-card",1),n.bIt("click",function(){n.eBV(e);const t=n.XpG();return n.Njj(t.onClick(null==t.searchedPokemon?null:t.searchedPokemon.id))}),n.nrm(2,"img",8),n.j41(3,"ion-card-header")(4,"ion-card-title"),n.EFF(5),n.k0s()(),n.j41(6,"ion-card-content")(7,"ion-card-subtitle"),n.EFF(8),n.k0s()()()()}if(2&a){const e=n.XpG();n.R7$(2),n.Y8G("src",null==e.searchedPokemon||null==e.searchedPokemon.sprites||null==e.searchedPokemon.sprites.other||null==e.searchedPokemon.sprites.other["official-artwork"]?null:e.searchedPokemon.sprites.other["official-artwork"].front_default,n.B4B),n.R7$(3),n.JRh(null==e.searchedPokemon?null:e.searchedPokemon.name),n.R7$(3),n.SpI(" ",null==e.searchedPokemon||null==e.searchedPokemon.types[0].type?null:e.searchedPokemon.types[0].type.name," ")}}let y=(()=>{class a{constructor(e,o,t,s){this.poki=e,this.loading=o,this.router=t,this.auth=s,this.showRandom=!0,this.query="",this.suggestions=[],this.pokemons=[],this.offset=0,this.limit=20,this.loadingp=!1,this.isAlertOpen=!1,this.alertButtons=[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Operaci\xf3n cancelada")}},{text:"Aceptar",role:"confirm",handler:()=>{this.logout()}}],(0,h.a)({powerOutline:m.iG$,eye:m.y5U})}ngOnInit(){this.poki.getPokemon(this.getRandomPokemon()).subscribe(e=>{this.data=e}),this.loadPokemons()}presentLoading(){var e=this;return(0,_.A)(function*(){const o=yield e.loading.create({message:"Cargando...",duration:1500,cssClass:"custom-loading"});yield o.present(),yield o.onDidDismiss(),console.log("Loading dismissed!")})()}getRandomPokemon(){return Math.floor(1025*Math.random())+1}onSearchChange(e){this.query=e.detail.value,this.query.length>1?this.poki.searchPokemon(this.query).subscribe(o=>{this.suggestions=o}):this.suggestions=[]}onSuggestionClick(e){var o=this;return(0,_.A)(function*(){o.showRandom=!1,yield o.presentLoading(),o.query=e,o.suggestions=[],o.poki.getPokemonByName(e).subscribe(t=>{o.searchedPokemon=t})})()}onSearchCancel(){var e=this;return(0,_.A)(function*(){yield e.presentLoading(),e.showRandom=!0})()}onClick(e){this.router.navigate(["tuPokemon",e])}loadPokemons(){this.loadingp||(this.loadingp=!0,console.log(`Cargando Pok\xe9mon con offset: ${this.offset} y limit: ${this.limit}`),this.poki.getPokemons(this.offset,this.limit).subscribe(e=>{console.log(e);const o=e.map(t=>this.poki.getPokemonDetails(t.url).toPromise());Promise.all(o).then(t=>{this.pokemons=[...this.pokemons,...t],this.offset+=this.limit,this.loadingp=!1}).catch(t=>{console.error("Error al cargar detalles de los Pok\xe9mon",t),this.loadingp=!1})}))}loadData(e){this.loadingp||this.loadPokemons(),e.target.complete()}setOpen(e){this.isAlertOpen=e}logout(){this.auth.logout()}static{this.\u0275fac=function(o){return new(o||a)(n.rXU(p.d),n.rXU(i.Xi),n.rXU(f.Ix),n.rXU(P.u))}}static{this.\u0275cmp=n.VBU({type:a,selectors:[["app-tab2"]],standalone:!0,features:[n.aNF],decls:14,vars:6,consts:[["slot","end"],[3,"click"],["name","power-outline"],["show-cancel-button","focus","placeholder","Buscar Pokemon",3,"ngModelChange","ionInput","ionClear","ngModel"],["header","Alerta","message","Deseas cerrar sesi\xf3n",3,"didDismiss","isOpen","buttons"],[3,"fullscreen"],[1,"fixed-list"],[1,"center-card"],["alt","Imagen de pokemon aleatoria",3,"src"],["size","5"],["threshold","10%",3,"ionInfinite"],["loadingText","Loading more Pok\xe9mon..."],[1,"cartitas",3,"click"],[3,"src","alt"],[1,"types"],["color","primary"]],template:function(o,t){1&o&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n.EFF(3,"Pokedex"),n.k0s(),n.j41(4,"ion-buttons",0)(5,"ion-button",1),n.bIt("click",function(){return t.setOpen(!0)}),n.nrm(6,"ion-icon",2),n.k0s()()(),n.j41(7,"ion-toolbar")(8,"ion-searchbar",3),n.mxI("ngModelChange",function(c){return n.DH7(t.query,c)||(t.query=c),c}),n.bIt("ionInput",function(c){return t.onSearchChange(c)})("ionClear",function(){return t.onSearchCancel()}),n.k0s()()(),n.j41(9,"ion-alert",4),n.bIt("didDismiss",function(){return t.setOpen(!1)}),n.k0s(),n.j41(10,"ion-content",5),n.DNE(11,C,4,0,"div",6)(12,O,19,3)(13,T,9,3,"div",7),n.k0s()),2&o&&(n.R7$(8),n.R50("ngModel",t.query),n.R7$(),n.Y8G("isOpen",t.isAlertOpen)("buttons",t.alertButtons),n.R7$(),n.Y8G("fullscreen",!0),n.R7$(),n.vxM(t.suggestions.length>0?11:-1),n.R7$(),n.vxM(t.showRandom?12:13))},dependencies:[i.QW,i.Zy,i.ZB,i.lO,i.ln,i.hU,i.Ax,i.Hp,i.Jm,i.iq,i.nf,i.uz,i.I9,i.S1,i.eU,i.ai,i.BC,i.W9,i.b_,i.ME,i.tN,i.HW,g.MD,d.YN,d.BC,d.vS],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.center-card[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-bottom:16px}ion-card[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0003;border-radius:20px;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;margin-bottom:16px;height:auto}ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;height:auto;margin-bottom:16px}ion-card-header[_ngcontent-%COMP%], ion-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center}ion-toolbar[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{--border-radius: 20px;margin-bottom:20px}ion-toolbar[_ngcontent-%COMP%]{--background: #B91F15}ion-card-title[_ngcontent-%COMP%]{text-transform:uppercase;font-size:32px}ion-card-subtitle[_ngcontent-%COMP%]{text-transform:uppercase;font-size:22px}.cartitas[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1rem}ion-title[_ngcontent-%COMP%]{text-align:center;font-size:20px}ion-col[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}']})}}return a})()}}]);